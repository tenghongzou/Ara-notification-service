# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8081

# Run Mode (development or production)
# In production mode, internal error details are hidden from clients
RUN_MODE=development

# JWT Configuration
# Generate a secure secret: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-key-here

# JWT issuer (must match other services)
JWT_ISSUER=ara-platform

# JWT audience (must match other services)
JWT_AUDIENCE=ara-services

# Redis Configuration
REDIS_URL=redis://localhost:6379
# Circuit breaker: consecutive failures before opening (stops attempting connections)
REDIS_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
# Circuit breaker: successes in half-open state before closing (resumes normal operation)
REDIS_CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2
# Circuit breaker: seconds to wait before testing connection again
REDIS_CIRCUIT_BREAKER_RESET_TIMEOUT_SECONDS=30
# Exponential backoff: initial delay in milliseconds
REDIS_BACKOFF_INITIAL_DELAY_MS=100
# Exponential backoff: maximum delay in milliseconds
REDIS_BACKOFF_MAX_DELAY_MS=30000

# Logging
# Options: trace, debug, info, warn, error
RUST_LOG=info

# WebSocket Configuration
# Heartbeat interval in seconds (server sends ping)
WEBSOCKET_HEARTBEAT_INTERVAL=30
# Connection timeout in seconds (disconnect if no activity)
WEBSOCKET_CONNECTION_TIMEOUT=120
# Cleanup task interval in seconds
WEBSOCKET_CLEANUP_INTERVAL=60
# Maximum total connections (0 = unlimited)
WEBSOCKET_MAX_CONNECTIONS=10000
# Maximum connections per user (0 = unlimited)
WEBSOCKET_MAX_CONNECTIONS_PER_USER=5
# Maximum channel subscriptions per connection (0 = unlimited)
WEBSOCKET_MAX_SUBSCRIPTIONS_PER_CONNECTION=50

# CORS (comma-separated origins, leave empty to allow any origin in development)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# API Key for HTTP triggers (required in production, optional in development)
# Generate a secure key: openssl rand -hex 32
API_KEY=your-api-key-here

# Message Queue Configuration (for offline message delivery)
# Enable message queue for offline users
QUEUE_ENABLED=false
# Maximum messages to queue per user
QUEUE_MAX_SIZE_PER_USER=100
# Time-to-live for queued messages in seconds (default: 1 hour)
QUEUE_MESSAGE_TTL_SECONDS=3600
# Cleanup interval for expired messages in seconds (default: 5 minutes)
QUEUE_CLEANUP_INTERVAL_SECONDS=300

# Rate Limiting Configuration
# Enable rate limiting (recommended for production)
RATELIMIT_ENABLED=false
# Maximum HTTP requests per second (per API key or IP)
RATELIMIT_HTTP_REQUESTS_PER_SECOND=100
# Burst capacity for HTTP requests (allows short bursts above the rate)
RATELIMIT_HTTP_BURST_SIZE=200
# Maximum WebSocket connections per minute (per IP)
RATELIMIT_WS_CONNECTIONS_PER_MINUTE=10
# Maximum WebSocket messages per second (per connection)
RATELIMIT_WS_MESSAGES_PER_SECOND=50
# Cleanup interval for stale rate limit buckets (seconds)
RATELIMIT_CLEANUP_INTERVAL_SECONDS=60

# ===========================================
# Feature Flags
# ===========================================
# Multi-tenant support
TENANT_ENABLED=false

# Cluster mode (for multi-instance deployment)
CLUSTER_ENABLED=false
